import{N as I,O as x,G as T,P as W,D as C,F as _,E as $,Q as v,R as D,S as R,T as H,U as K,V as G,W as Q,X}from"./index.js";const m={};function S(n){return function(e,t){var o;if(t){if(t.kind!=="class")throw"deco stage 3 class";const s=(o=m.fakePrototype)!==null&&o!==void 0?o:m.fakePrototype={},r=p(s);return delete m.fakePrototype,p(e.prototype,r),n(e)}else return n(e)}}function O(n){return function(e,t){var o;if(typeof t=="object"){const s=(o=m.fakePrototype)!==null&&o!==void 0?o:m.fakePrototype={};return s[t.name]=e,n(s,t.name)}else return n(e,t)}}const N=Symbol("vue-facing-decorator-slot");class q{constructor(e){this.names=new Map,this.inComponent=!1,this.cachedVueComponent=null,this.master=e}obtainMap(e){let t=this.getMap(e);return t||(t=new Map,this.names.set(e,t)),t}getMap(e){return this.names.get(e)}}function J(n,e){if(y(n))throw"";e&&(e.master=n);const t=e!=null?e:new q(n);return Object.defineProperty(n,N,{enumerable:!1,value:t}),t}function y(n){var e;return(e=Object.getOwnPropertyDescriptor(n,N))===null||e===void 0?void 0:e.value}function p(n,e){const t=y(n);return t||J(n,e)}function L(n,e){return n.reduce((t,o)=>(t[o]=e[o],t),{})}function k(n){const e=[];let t=n;do e.unshift(t),t=Object.getPrototypeOf(t);while(t.constructor!==j&&!y(t));return e}function z(n){let e=Object.getPrototypeOf(n);for(;e.constructor!==j;){const t=y(e);if(t)return t;e=Object.getPrototypeOf(e)}return null}function U(n,e,t){return n.filter(o=>{let s=e;for(;s!=null;){for(const r of s.names.keys()){if(t&&!t(r))continue;if(r==="customDecorator"){const a=s.obtainMap("customDecorator");if(a.has(o)){if(a.get(o).every(i=>!i.preserve))return!1;continue}}if(s.names.get(r).has(o))return!1}s=z(s.master)}return!0})}function M(n,e){const t=Object.getOwnPropertyDescriptors(n);return Object.keys(t).filter(o=>e(t[o],o))}function P(n){function e(t,o){if(o)O(function(s,r){n(s,r)})(t,o);else return O(function(s,r){n(s,r,t)})}return e}function V(n){return typeof n=="function"?n:function(){return n||{}}}const Y=n=>n instanceof Promise;function Z(n,e){const o=p(n.prototype).getMap("setup");if(!o||o.size===0)return;const s=function(r,c){const a={};let i=null;for(const u of o.keys()){const f=o.get(u).setupFunction(r,c);Y(f)?(i!=null||(i=[]),i.push(f.then(l=>{a[u]=l}))):a[u]=f}return Array.isArray(i)?Promise.all(i).then(()=>a):a};e.setup=s}function B(n,e){var t;(t=e.computed)!==null&&t!==void 0||(e.computed={});const o=p(n.prototype),s=o.obtainMap("computed"),r=o.obtainMap("vanilla");k(n.prototype).forEach(a=>{M(a,(i,u)=>(typeof i.get=="function"||typeof i.set=="function")&&!r.has(u)).forEach(i=>{s.set(i,!0);const u=Object.getOwnPropertyDescriptor(a,i);e.computed[i]={get:typeof u.get=="function"?u.get:void 0,set:typeof u.set=="function"?u.set:void 0}})})}function tt(n,e,t){var o;(o=e.data)!==null&&o!==void 0||(e.data={});const s=new n(e,t);let r=M(s,(a,i)=>{var u,f;return!!a.enumerable&&!(!((u=e.methods)===null||u===void 0)&&u[i])&&!(!((f=e.props)===null||f===void 0)&&f[i])});const c=p(n.prototype);r=U(r,c,a=>!["provide"].includes(a)),Object.assign(e.data,L(r,s))}const et=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","beforeDestroy","beforeUnmount","destroyed","unmounted","renderTracked","renderTriggered","errorCaptured","serverPrefetch","render"];function nt(n,e){var t,o,s;const r=p(n.prototype),c=k(n.prototype),a=r.obtainMap("hooks");(t=e.hooks)!==null&&t!==void 0||(e.hooks={}),(o=e.methods)!==null&&o!==void 0||(e.methods={});const i={},u={};c.forEach(l=>{let d=M(l,(h,b)=>typeof h.value=="function"&&b!=="constructor");d=U(d,r,h=>!["watch","hooks","emits","provide"].includes(h)),d.forEach(h=>{et.includes(h)||a.has(h)?i[h]=l[h]:u[h]=l[h]})}),Object.assign(e.methods,u);const f=[...(s=e.beforeCreateCallbacks)!==null&&s!==void 0?s:[]];if(f&&f.length>0){const l=i.beforeCreate;i.beforeCreate=function(){f.forEach(d=>d.apply(this,arguments)),l&&l.apply(this,arguments)}}Object.assign(e.hooks,i)}function F(n,e){var t;(t=n.beforeCreateCallbacks)!==null&&t!==void 0||(n.beforeCreateCallbacks=[]),n.beforeCreateCallbacks.push(function(){const o=this;e(o).forEach((r,c)=>{Object.defineProperty(o,c,r)})})}const wt=P(function(n,e,t){p(n).obtainMap("ref").set(e,typeof t>"u"?null:t)});function ot(n,e){const o=p(n.prototype).getMap("ref");!o||o.size===0||F(e,s=>{const r=new Map;return o.forEach((c,a)=>{const i=c===null?a:c;r.set(a,{get:function(){return s.$refs[i]},set:void 0})}),r})}function gt(n,e){return O(function(t,o){const r=p(t).obtainMap("watch"),c=Object.assign({},{},{key:n,handler:t[o]});if(r.has(o)){const a=r.get(o);Array.isArray(a)?a.push(c):r.set(o,[a,c])}else r.set(o,c)})}function st(n,e){var t;(t=e.watch)!==null&&t!==void 0||(e.watch={});const s=p(n.prototype).getMap("watch");!s||s.size===0||s.forEach((r,c)=>{(Array.isArray(r)?r:[r]).forEach(i=>{if(!e.watch[i.key])e.watch[i.key]=i;else{const u=e.watch[i.key];Array.isArray(u)?u.push(i):e.watch[i.key]=[u,i]}})})}const rt=P(function(n,e,t){const s=p(n).obtainMap("props"),r=Object.assign({},t!=null?t:{});s.set(e,r)});function it(n,e){var t;(t=e.props)!==null&&t!==void 0||(e.props={});const s=p(n.prototype).getMap("props");!s||s.size===0||s.forEach((r,c)=>{e.props[c]=r})}function ct(n,e){var t;(t=e.inject)!==null&&t!==void 0||(e.inject={});const s=p(n.prototype).getMap("inject");!s||s.size===0||s.forEach((r,c)=>{e.inject[c]=r})}function at(n,e,t){var o;(o=e.provide)!==null&&o!==void 0||(e.provide={});const r=p(n.prototype).obtainMap("provide");if(!r)return null;r.forEach((c,a)=>{const i=c===null?a:c;e.provide[i]=I(()=>t[a])})}var ut=function(n,e,t,o){function s(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(f){try{u(o.next(f))}catch(l){c(l)}}function i(f){try{u(o.throw(f))}catch(l){c(l)}}function u(f){f.done?r(f.value):s(f.value).then(a,i)}u((o=o.apply(n,e||[])).next())})};function ft(n,e){var t;(t=e.methods)!==null&&t!==void 0||(e.methods={});const o=n.prototype,s=p(o),r=s.getMap("emit");if(!r||r.size===0)return;const c=s.obtainMap("emits");r.forEach((a,i)=>{const u=a===null?i:a;c.set(u,!0),e.methods[i]=function(){return ut(this,arguments,void 0,function*(){const f=o[i].apply(this,arguments);if(f instanceof Promise){const l=yield f;this.$emit(u,l)}else f===void 0?this.$emit(u):this.$emit(u,f)})}})}const Ct=P(function(n,e,t){var o;t!=null||(t={});const s=p(n);let r="modelValue";const c=Object.assign({},t);c&&(r=(o=c.name)!==null&&o!==void 0?o:r,delete c.name),rt(c)(n,r),s.obtainMap("v-model").set(e,t)});function lt(n,e){var t;(t=e.computed)!==null&&t!==void 0||(e.computed={});const o=p(n.prototype),s=o.getMap("v-model");if(!s||s.size===0)return;const r=o.obtainMap("emits");s.forEach((c,a)=>{var i;const u=(i=c&&c.name)!==null&&i!==void 0?i:"modelValue",f="update:".concat(u);e.computed[a]={get:function(){return this[u]},set:function(l){this.$emit(f,l)}},r.set(f,!0)})}function pt(n,e){const o=p(n.prototype).getMap("vanilla");if(!o||o.size===0)return;const s=k(n.prototype),r=new Map;F(e,c=>(s.forEach(a=>{const i=Object.getOwnPropertyDescriptors(a);for(const u in i){const f=i[u];f&&o.has(u)&&(typeof f.get=="function"||typeof f.set=="function")&&r.set(u,{set:typeof f.set=="function"?f.set.bind(c):void 0,get:typeof f.get=="function"?f.get.bind(c):void 0})}}),r))}function dt(n,e){const t={};return Z(n,t),lt(n,t),B(n,t),st(n,t),it(n,t),ct(n,t),ft(n,t),ot(n,t),pt(n,t),nt(n,t),Object.assign(Object.assign({name:n.name,setup:t.setup,data(){var s;return delete t.data,tt(n,t,this),(s=t.data)!==null&&s!==void 0?s:{}},methods:t.methods,computed:t.computed,watch:t.watch,props:t.props,inject:t.inject,provide(){var s;return at(n,t,this),(s=t.provide)!==null&&s!==void 0?s:{}}},t.hooks),{extends:e})}function ht(n,e,t){var o,s;const r=dt(n,t),c=p(n.prototype);Object.keys(e).reduce((l,d)=>(["options","modifier","methods","emits","setup","provide"].includes(d)||(l[d]=e[d]),l),r);let a=Array.from(c.obtainMap("emits").keys());if(Array.isArray(e.emits)&&(a=Array.from(new Set([...a,...e.emits]))),r.emits=a,typeof e.methods=="object"&&!Array.isArray(e.methods)&&e.methods!==null&&((o=r.methods)!==null&&o!==void 0||(r.methods={}),Object.assign(r.methods,e.methods)),!r.setup)r.setup=e.setup;else{const l=r.setup,d=(s=e.setup)!==null&&s!==void 0?s:function(){return{}},h=function(b,A){const w=d(b,A),g=l(b,A);return g instanceof Promise||w instanceof Promise?Promise.all([w,g]).then(E=>Object.assign({},E[0],E[1])):Object.assign({},w,g)};r.setup=h}const i=V(r.provide),u=V(e.provide);r.provide=function(){return Object.assign({},i.call(this),u.call(this))};const f=c.getMap("customDecorator");return f&&f.size>0&&f.forEach(l=>{l.forEach(d=>d.creator.apply({},[r,d.key]))}),e.options&&Object.assign(r,e.options),e.modifier&&e.modifier(r),x(r)}function mt(n,e){const t=p(n.prototype);t.inComponent=!0;const o=z(n.prototype);if(o){if(!o.inComponent)throw"Class should be decorated by Component or ComponentBase: "+t.master;if(o.cachedVueComponent===null)throw"Component decorator 1"}const s=ht(n,e,o===null?void 0:o.cachedVueComponent);s.__vfdConstructor=n,t.cachedVueComponent=s,n.__vccOpts=s}function bt(n,e,t){return typeof e=="function"?S(function(o){return n(o,{})})(e,t):S(function(o){return n(o,e)})}function vt(n,e){return bt(function(t,o){return mt(t,o),t},n,e)}const _t=vt;function Ot(n){const e=p(n.prototype);if(!e.inComponent)throw"to native 1";const t=e.cachedVueComponent;if(!t)throw"to native 2";return t}const j=class{constructor(n,e){const t=n.props;t&&Object.keys(t).forEach(s=>{this[s]=e[s]});const o=n.methods;o&&Object.keys(o).forEach(s=>{this[s]=o[s].bind(e)})}},kt=j,Mt=(n,e)=>{const t=n.__vccOpts||n;for(const[o,s]of e)t[o]=s;return t},Pt=T("user",{state:()=>({auth:W(),db:C(_),usersRef:$(C(_),"users"),inviteRef:$(C(_),"invites")}),getters:{user(){var n;return(n=this.auth)==null?void 0:n.currentUser}},actions:{findUserById(n){return new Promise((e,t)=>{const o=v(this.usersRef,n);D(o).then(s=>{s.exists()?e(s.data()):t("User not found.")}).catch(s=>{console.error(s),t(s)})})},findInviteByKey(n){return new Promise((e,t)=>{const o=v(this.inviteRef,n);D(o).then(s=>{s.exists()?e(s.data()):t("Invalid invite key.")}).catch(s=>{console.error(s),t(s)})})},createInvite(){return new Promise((n,e)=>{const t=v(this.inviteRef,this.user.uid);R(t,{uid:this.user.uid}).then(()=>{n(t.id)}).catch(o=>{console.error(o),e(o)})})},login(n,e){return new Promise((t,o)=>(this.auth!==null&&H(this.auth,K.credential(n,e)).then(()=>G(this.auth)).then(s=>{if(s===null)return o("User is null.");t(s.user)}).catch(s=>{o(s)}),o("Authentication is not available.")))},register(n,e,t,o,s){return new Promise((r,c)=>(this.auth!==null&&Q(this.auth,e,t).then(a=>X(a.user,{url:"https://www.vubdivingcenter.be/user/register?email=".concat(e)})).then(()=>R(v(this.usersRef,this.user.uid),{firstName:o,lastName:s,invite:n})).then(()=>{r(this.user)}).catch(a=>{console.error(a),c(a)}),c("Authentication is not available.")))}}});export{_t as C,kt as V,Mt as _,Ct as a,wt as b,gt as c,rt as d,Ot as t,Pt as u};
