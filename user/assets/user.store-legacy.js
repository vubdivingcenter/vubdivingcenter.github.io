System.register(["./index-legacy.js"],(function(e,t){"use strict";var s,i,r,n,u,h,a,o,c,l,d,v,f;return{setters:[e=>{s=e.J,i=e.P,r=e.F,n=e.H,u=e.G,h=e.Q,a=e.R,o=e.S,c=e.T,l=e.U,d=e.V,v=e.W,f=e.X}],execute:function(){e("u",s("user",{state:()=>({auth:i(),db:r(n),usersRef:u(r(n),"users"),inviteRef:u(r(n),"invites")}),getters:{user(){var e;return null===(e=this.auth)||void 0===e?void 0:e.currentUser}},actions:{findUserById(e){return new Promise(((t,s)=>{const i=h(this.usersRef,e);a(i).then((e=>{e.exists()?t(e.data()):s("User not found.")})).catch((e=>{console.error(e),s(e)}))}))},findInviteByKey(e){return new Promise(((t,s)=>{const i=h(this.inviteRef,e);a(i).then((e=>{e.exists()?t(e.data()):s("Invalid invite key.")})).catch((e=>{console.error(e),s(e)}))}))},createInvite(){return new Promise(((e,t)=>{const s=h(this.inviteRef,this.user.uid);o(s,{uid:this.user.uid}).then((()=>{e(s.id)})).catch((e=>{console.error(e),t(e)}))}))},login(e,t){return new Promise(((s,i)=>(null!==this.auth&&c(this.auth,l.credential(e,t)).then((()=>d(this.auth))).then((e=>{if(null===e)return i("User is null.");s(e.user)})).catch((e=>{i(e)})),i("Authentication is not available."))))},register(e,t,s,i,r){return new Promise(((n,u)=>(null!==this.auth&&v(this.auth,t,s).then((e=>f(e.user,{url:`https://www.vubdivingcenter.be/user/register?email=${t}`}))).then((()=>o(h(this.usersRef,this.user.uid),{firstName:i,lastName:r,invite:e}))).then((()=>{n(this.user)})).catch((e=>{console.error(e),u(e)})),u("Authentication is not available."))))}}}))}}}));
