System.register(["./index-legacy.js"],(function(t,e){"use strict";var n,o,r,s,i,c,u,a,f,p,l,d,h,v,m;return{setters:[t=>{n=t.N,o=t.O,r=t.G,s=t.P,i=t.D,c=t.F,u=t.E,a=t.Q,f=t.R,p=t.S,l=t.T,d=t.U,h=t.V,v=t.W,m=t.X}],execute:function(){t({c:function(t,e){return b((function(e,n){const o=j(e).obtainMap("watch"),r=Object.assign({},{},{key:t,handler:e[n]});if(o.has(n)){const t=o.get(n);Array.isArray(t)?t.push(r):o.set(n,[t,r])}else o.set(n,r)}))},t:function(t){const e=j(t.prototype);if(!e.inComponent)throw"to native 1";const n=e.cachedVueComponent;if(!n)throw"to native 2";return n}});const e={};function y(t){return function(n,o){var r;if(o){if("class"!==o.kind)throw"deco stage 3 class";const s=j(null!==(r=e.fakePrototype)&&void 0!==r?r:e.fakePrototype={});return delete e.fakePrototype,j(n.prototype,s),t(n)}return t(n)}}function b(t){return function(n,o){var r;if("object"==typeof o){const s=null!==(r=e.fakePrototype)&&void 0!==r?r:e.fakePrototype={};return s[o.name]=n,t(s,o.name)}return t(n,o)}}const g=Symbol("vue-facing-decorator-slot");class w{constructor(t){this.names=new Map,this.inComponent=!1,this.cachedVueComponent=null,this.master=t}obtainMap(t){let e=this.getMap(t);return e||(e=new Map,this.names.set(t,e)),e}getMap(t){return this.names.get(t)}}function O(t){var e;return null===(e=Object.getOwnPropertyDescriptor(t,g))||void 0===e?void 0:e.value}function j(t,e){const n=O(t);return n||function(t,e){if(O(t))throw"";e&&(e.master=t);const n=null!=e?e:new w(t);return Object.defineProperty(t,g,{enumerable:!1,value:n}),n}(t,e)}function k(t){const e=[];let n=t;do{e.unshift(n),n=Object.getPrototypeOf(n)}while(n.constructor!==_&&!O(n));return e}function M(t){let e=Object.getPrototypeOf(t);for(;e.constructor!==_;){const t=O(e);if(t)return t;e=Object.getPrototypeOf(e)}return null}function P(t,e,n){return t.filter((t=>{let o=e;for(;null!=o;){for(const e of o.names.keys())if(!n||n(e)){if("customDecorator"===e){const e=o.obtainMap("customDecorator");if(e.has(t)){if(e.get(t).every((t=>!t.preserve)))return!1;continue}}if(o.names.get(e).has(t))return!1}o=M(o.master)}return!0}))}function C(t,e){const n=Object.getOwnPropertyDescriptors(t);return Object.keys(n).filter((t=>e(n[t],t)))}function E(t){return function(e,n){if(!n)return b((function(n,o){t(n,o,e)}));b((function(e,n){t(e,n)}))(e,n)}}function A(t){return"function"==typeof t?t:function(){return t||{}}}const z=t=>t instanceof Promise,D=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","beforeDestroy","beforeUnmount","destroyed","unmounted","renderTracked","renderTriggered","errorCaptured","serverPrefetch","render"];function V(t,e){var n;null!==(n=t.beforeCreateCallbacks)&&void 0!==n||(t.beforeCreateCallbacks=[]),t.beforeCreateCallbacks.push((function(){const t=this;e(t).forEach(((e,n)=>{Object.defineProperty(t,n,e)}))}))}t("b",E((function(t,e,n){j(t).obtainMap("ref").set(e,void 0===n?null:n)})));const x=t("d",E((function(t,e,n){const o=j(t).obtainMap("props"),r=Object.assign({},null!=n?n:{});o.set(e,r)})));var R=function(t,e,n,o){return new(n||(n=Promise))((function(r,s){function i(t){try{u(o.next(t))}catch(e){s(e)}}function c(t){try{u(o.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((o=o.apply(t,e||[])).next())}))};function U(t,e){const o={};!function(t,e){const n=j(t.prototype).getMap("setup");n&&0!==n.size&&(e.setup=function(t,e){const o={};let r=null;for(const s of n.keys()){const i=n.get(s).setupFunction(t,e);z(i)?(null!=r||(r=[]),r.push(i.then((t=>{o[s]=t})))):o[s]=i}return Array.isArray(r)?Promise.all(r).then((()=>o)):o})}(t,o),function(t,e){var n;null!==(n=e.computed)&&void 0!==n||(e.computed={});const o=j(t.prototype),r=o.getMap("v-model");if(!r||0===r.size)return;const s=o.obtainMap("emits");r.forEach(((t,n)=>{var o;const r=null!==(o=t&&t.name)&&void 0!==o?o:"modelValue",i=`update:${r}`;e.computed[n]={get:function(){return this[r]},set:function(t){this.$emit(i,t)}},s.set(i,!0)}))}(t,o),function(t,e){var n;null!==(n=e.computed)&&void 0!==n||(e.computed={});const o=j(t.prototype),r=o.obtainMap("computed"),s=o.obtainMap("vanilla");k(t.prototype).forEach((t=>{C(t,((t,e)=>("function"==typeof t.get||"function"==typeof t.set)&&!s.has(e))).forEach((n=>{r.set(n,!0);const o=Object.getOwnPropertyDescriptor(t,n);e.computed[n]={get:"function"==typeof o.get?o.get:void 0,set:"function"==typeof o.set?o.set:void 0}}))}))}(t,o),function(t,e){var n;null!==(n=e.watch)&&void 0!==n||(e.watch={});const o=j(t.prototype).getMap("watch");o&&0!==o.size&&o.forEach(((t,n)=>{(Array.isArray(t)?t:[t]).forEach((t=>{if(e.watch[t.key]){const n=e.watch[t.key];Array.isArray(n)?n.push(t):e.watch[t.key]=[n,t]}else e.watch[t.key]=t}))}))}(t,o),function(t,e){var n;null!==(n=e.props)&&void 0!==n||(e.props={});const o=j(t.prototype).getMap("props");o&&0!==o.size&&o.forEach(((t,n)=>{e.props[n]=t}))}(t,o),function(t,e){var n;null!==(n=e.inject)&&void 0!==n||(e.inject={});const o=j(t.prototype).getMap("inject");o&&0!==o.size&&o.forEach(((t,n)=>{e.inject[n]=t}))}(t,o),function(t,e){var n;null!==(n=e.methods)&&void 0!==n||(e.methods={});const o=t.prototype,r=j(o),s=r.getMap("emit");if(!s||0===s.size)return;const i=r.obtainMap("emits");s.forEach(((t,n)=>{const r=null===t?n:t;i.set(r,!0),e.methods[n]=function(){return R(this,arguments,void 0,(function*(){const t=o[n].apply(this,arguments);if(t instanceof Promise){const e=yield t;this.$emit(r,e)}else void 0===t?this.$emit(r):this.$emit(r,t)}))}}))}(t,o),function(t,e){const n=j(t.prototype).getMap("ref");n&&0!==n.size&&V(e,(t=>{const e=new Map;return n.forEach(((n,o)=>{const r=null===n?o:n;e.set(o,{get:function(){return t.$refs[r]},set:void 0})})),e}))}(t,o),function(t,e){const n=j(t.prototype).getMap("vanilla");if(!n||0===n.size)return;const o=k(t.prototype),r=new Map;V(e,(t=>(o.forEach((e=>{const o=Object.getOwnPropertyDescriptors(e);for(const s in o){const e=o[s];e&&n.has(s)&&("function"!=typeof e.get&&"function"!=typeof e.set||r.set(s,{set:"function"==typeof e.set?e.set.bind(t):void 0,get:"function"==typeof e.get?e.get.bind(t):void 0}))}})),r)))}(t,o),function(t,e){var n,o,r;const s=j(t.prototype),i=k(t.prototype),c=s.obtainMap("hooks");null!==(n=e.hooks)&&void 0!==n||(e.hooks={}),null!==(o=e.methods)&&void 0!==o||(e.methods={});const u={},a={};i.forEach((t=>{let e=C(t,((t,e)=>"function"==typeof t.value&&"constructor"!==e));e=P(e,s,(t=>!["watch","hooks","emits","provide"].includes(t))),e.forEach((e=>{D.includes(e)||c.has(e)?u[e]=t[e]:a[e]=t[e]}))})),Object.assign(e.methods,a);const f=[...null!==(r=e.beforeCreateCallbacks)&&void 0!==r?r:[]];if(f&&f.length>0){const t=u.beforeCreate;u.beforeCreate=function(){f.forEach((t=>t.apply(this,arguments))),t&&t.apply(this,arguments)}}Object.assign(e.hooks,u)}(t,o);const r=Object.assign(Object.assign({name:t.name,setup:o.setup,data(){var e;return delete o.data,function(t,e,n){var o;null!==(o=e.data)&&void 0!==o||(e.data={});const r=new t(e,n);let s=C(r,((t,n)=>{var o,r;return!!t.enumerable&&!(null===(o=e.methods)||void 0===o?void 0:o[n])&&!(null===(r=e.props)||void 0===r?void 0:r[n])}));s=P(s,j(t.prototype),(t=>!["provide"].includes(t))),Object.assign(e.data,function(t,e){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}(s,r))}(t,o,this),null!==(e=o.data)&&void 0!==e?e:{}},methods:o.methods,computed:o.computed,watch:o.watch,props:o.props,inject:o.inject,provide(){var e;return function(t,e,o){var r;null!==(r=e.provide)&&void 0!==r||(e.provide={});const s=j(t.prototype).obtainMap("provide");if(!s)return null;s.forEach(((t,r)=>{const s=null===t?r:t;e.provide[s]=n((()=>o[r]))}))}(t,o,this),null!==(e=o.provide)&&void 0!==e?e:{}}},o.hooks),{extends:e});return r}function $(t,e){const n=j(t.prototype);n.inComponent=!0;const r=M(t.prototype);if(r){if(!r.inComponent)throw"Class should be decorated by Component or ComponentBase: "+n.master;if(null===r.cachedVueComponent)throw"Component decorator 1"}const s=function(t,e,n){var r,s;const i=U(t,n),c=j(t.prototype);Object.keys(e).reduce(((t,n)=>(["options","modifier","methods","emits","setup","provide"].includes(n)||(t[n]=e[n]),t)),i);let u=Array.from(c.obtainMap("emits").keys());if(Array.isArray(e.emits)&&(u=Array.from(new Set([...u,...e.emits]))),i.emits=u,"object"!=typeof e.methods||Array.isArray(e.methods)||null===e.methods||(null!==(r=i.methods)&&void 0!==r||(i.methods={}),Object.assign(i.methods,e.methods)),i.setup){const t=i.setup,n=null!==(s=e.setup)&&void 0!==s?s:function(){return{}},o=function(e,o){const r=n(e,o),s=t(e,o);return s instanceof Promise||r instanceof Promise?Promise.all([r,s]).then((t=>Object.assign({},t[0],t[1]))):Object.assign({},r,s)};i.setup=o}else i.setup=e.setup;const a=A(i.provide),f=A(e.provide);i.provide=function(){return Object.assign({},a.call(this),f.call(this))};const p=c.getMap("customDecorator");return p&&p.size>0&&p.forEach((t=>{t.forEach((t=>t.creator.apply({},[i,t.key])))})),e.options&&Object.assign(i,e.options),e.modifier&&e.modifier(i),o(i)}(t,e,null===r?void 0:r.cachedVueComponent);s.__vfdConstructor=t,n.cachedVueComponent=s,t.__vccOpts=s}t("a",E((function(t,e,n){var o;null!=n||(n={});const r=j(t);let s="modelValue";const i=Object.assign({},n);i&&(s=null!==(o=i.name)&&void 0!==o?o:s,delete i.name),x(i)(t,s),r.obtainMap("v-model").set(e,n)}))),t("C",(function(t,e){return function(t,e,n){return"function"==typeof e?y((function(e){return t(e,{})}))(e,n):y((function(n){return t(n,e)}))}((function(t,e){return $(t,e),t}),t,e)}));const _=class{constructor(t,e){const n=t.props;n&&Object.keys(n).forEach((t=>{this[t]=e[t]}));const o=t.methods;o&&Object.keys(o).forEach((t=>{this[t]=o[t].bind(e)}))}};t("V",_),t("_",((t,e)=>{const n=t.__vccOpts||t;for(const[o,r]of e)n[o]=r;return n})),t("u",r("user",{state:()=>({auth:s(),db:i(c),usersRef:u(i(c),"users"),inviteRef:u(i(c),"invites")}),getters:{user(){var t;return null===(t=this.auth)||void 0===t?void 0:t.currentUser}},actions:{findUserById(t){return new Promise(((e,n)=>{const o=a(this.usersRef,t);f(o).then((t=>{t.exists()?e(t.data()):n("User not found.")})).catch((t=>{console.error(t),n(t)}))}))},findInviteByKey(t){return new Promise(((e,n)=>{const o=a(this.inviteRef,t);f(o).then((t=>{t.exists()?e(t.data()):n("Invalid invite key.")})).catch((t=>{console.error(t),n(t)}))}))},createInvite(){return new Promise(((t,e)=>{const n=a(this.inviteRef,this.user.uid);p(n,{uid:this.user.uid}).then((()=>{t(n.id)})).catch((t=>{console.error(t),e(t)}))}))},login(t,e){return new Promise(((n,o)=>(null!==this.auth&&l(this.auth,d.credential(t,e)).then((()=>h(this.auth))).then((t=>{if(null===t)return o("User is null.");n(t.user)})).catch((t=>{o(t)})),o("Authentication is not available."))))},register(t,e,n,o,r){return new Promise(((s,i)=>(null!==this.auth&&v(this.auth,e,n).then((t=>m(t.user,{url:`https://www.vubdivingcenter.be/user/register?email=${e}`}))).then((()=>p(a(this.usersRef,this.user.uid),{firstName:o,lastName:r,invite:t}))).then((()=>{s(this.user)})).catch((t=>{console.error(t),i(t)})),i("Authentication is not available."))))}}}))}}}));
