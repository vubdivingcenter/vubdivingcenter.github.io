System.register(["./index-legacy.js"],(function(e,t){"use strict";var s,i,r,n,u,h,a,o,c,l,d,v,f;return{setters:[e=>{s=e.y,i=e.z,r=e.A,n=e.B,u=e.C,h=e.D,a=e.E,o=e.G,c=e.H,l=e.J,d=e.K,v=e.L,f=e.M}],execute:function(){e("u",s("user",{state:()=>({auth:i(),db:r(f),usersRef:n(r(f),"users"),inviteRef:n(r(f),"invites")}),getters:{user(){var e;return null===(e=this.auth)||void 0===e?void 0:e.currentUser}},actions:{findUserById(e){return new Promise(((t,s)=>{const i=u(this.usersRef,e);h(i).then((e=>{e.exists()?t(e.data()):s("User not found.")})).catch((e=>{console.error(e),s(e)}))}))},findInviteByKey(e){return new Promise(((t,s)=>{const i=u(this.inviteRef,e);h(i).then((e=>{e.exists()?t(e.data()):s("Invalid invite key.")})).catch((e=>{console.error(e),s(e)}))}))},createInvite(){return new Promise(((e,t)=>{const s=u(this.inviteRef,this.user.uid);a(s,{uid:this.user.uid}).then((()=>{e(s.id)})).catch((e=>{console.error(e),t(e)}))}))},login(e,t){return new Promise(((s,i)=>(null!==this.auth&&o(this.auth,c.credential(e,t)).then((()=>l(this.auth))).then((e=>{if(null===e)return i("User is null.");s(e.user)})).catch((e=>{i(e)})),i("Authentication is not available."))))},register(e,t,s,i,r){return new Promise(((n,h)=>(null!==this.auth&&d(this.auth,t,s).then((e=>v(e.user,{url:`https://www.vubdivingcenter.be/user/register?email=${t}`}))).then((()=>a(u(this.usersRef,this.user.uid),{firstName:i,lastName:r,invite:e}))).then((()=>{n(this.user)})).catch((e=>{console.error(e),h(e)})),h("Authentication is not available."))))}}}))}}}));
