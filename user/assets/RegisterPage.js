var C=Object.defineProperty;var E=(t,e,o)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var r=(t,e,o)=>(E(t,typeof e!="symbol"?e+"":e,o),o);import{t as _,V as c,C as I,_ as D}from"./_plugin-vue_export-helper.js";import{x as M,y as P,A as j,B,C as U,D as $,r as m,o as h,j as z,k as a,l as s,c as v,a as f,t as b,m as u,E as S,F as O}from"./index.js";import{u as R}from"./user.store.js";var W=Object.defineProperty,A=Object.getOwnPropertyDescriptor,F=(t,e,o,d)=>{for(var n=d>1?void 0:d?A(e,o):e,w=t.length-1,i;w>=0;w--)(i=t[w])&&(n=(d?i(e,o,n):i(n))||n);return d&&n&&W(e,o,n),n};let k=class extends c{constructor(){super(...arguments);r(this,"userStore",R());r(this,"key","");r(this,"invite");r(this,"email","");r(this,"firstName","");r(this,"lastName","");r(this,"password","");r(this,"password2","");r(this,"error","")}mounted(){this.key=this.$route.params.key,this.userStore.findInviteByKey(this.key).then(o=>{this.invite=o}).catch(o=>{console.error(o)})}async register(){this.error=void 0;try{if(!this.email||!this.firstName||!this.lastName||!this.password||!this.password2){this.setErrorMessage("Gelieve alle velden in te vullen");return}if(this.password!==this.password2){this.setErrorMessage("Wachtwoorden komen niet overeen");return}this.userStore.register(this.key,this.email,this.password,this.firstName,this.lastName).then(o=>{console.log("User registered",o),this.$router.push("/login")}).catch(o=>{const d=o.message;switch(o.code){case"auth/weak-password":this.setErrorMessage("Het wachtwoord is te zwak en moet minstens 6 karakters lang zijn.");break;case"auth/email-already-in-use":this.setErrorMessage("Dit e-mail adres is reeds in gebruik. Klik op wachtwoord vergeten om een nieuw wachtwoord aan te vragen.");break;case"auth/invalid-email":this.setErrorMessage("Dit e-mail adres is niet geldig.");break;case"auth/operation-not-allowed":this.setErrorMessage("E-mail/wachtwoord accounts zijn tijdelijk onbeschikbaar.");break;default:this.setErrorMessage(d);break}})}catch(o){console.error(o)}}setErrorMessage(o){this.error=o}};k=F([I({components:{IonPage:M,IonContent:P,IonItem:j,IonLabel:B,IonInput:U,IonButton:$}})],k);const K=_(k),G={class:"message"},H={key:0,class:"error"},L={key:1};function T(t,e,o,d,n,w){const i=m("ion-label"),p=m("ion-input"),g=m("ion-item"),y=m("ion-button"),V=m("ion-content"),N=m("ion-page");return h(),z(N,null,{default:a(()=>[s(V,{class:"ion-padding"},{default:a(()=>[t.invite?(h(),v(O,{key:0},[f("div",G,[f("p",null,[f("b",null,b(t.invite.name),1),e[5]||(e[5]=u(" heeft je uitgenodigd om te registreren op de VDC website."))]),e[6]||(e[6]=f("p",{class:"info"},"Deze uitnodiging is alleen bestemt voor leden van de duikclub.",-1))]),t.error?(h(),v("span",H,b(t.error),1)):S("",!0),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[7]||(e[7]=[u("E-mail")])),_:1}),s(p,{modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=l=>t.email=l),type:"email"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[8]||(e[8]=[u("Voornaam")])),_:1}),s(p,{modelValue:t.firstName,"onUpdate:modelValue":e[1]||(e[1]=l=>t.firstName=l),type:"text"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[9]||(e[9]=[u("Achternaam")])),_:1}),s(p,{modelValue:t.lastName,"onUpdate:modelValue":e[2]||(e[2]=l=>t.lastName=l),type:"text"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[10]||(e[10]=[u("Wachtwoord")])),_:1}),s(p,{modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]=l=>t.password=l),type:"password"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[11]||(e[11]=[u("Wachtwoord (herhalen)")])),_:1}),s(p,{modelValue:t.password2,"onUpdate:modelValue":e[4]||(e[4]=l=>t.password2=l),type:"password"},null,8,["modelValue"])]),_:1}),s(y,{expand:"full",onClick:t.register},{default:a(()=>e[12]||(e[12]=[u("Registreren")])),_:1},8,["onClick"]),e[13]||(e[13]=f("a",{target:"_blank",href:"https://www.vubdivingcenter.be/privacy-policy/"},"Privacybeleid",-1))],64)):(h(),v("p",L,"Deze uitnodiging is niet geldig of reeds gebruikt."))]),_:1})]),_:1})}const Z=D(K,[["render",T],["__scopeId","data-v-73101548"]]);export{Z as default};
