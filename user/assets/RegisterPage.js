var C=Object.defineProperty;var E=(t,e,o)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var r=(t,e,o)=>(E(t,typeof e!="symbol"?e+"":e,o),o);import{t as _,V as c,C as I,_ as M}from"./_plugin-vue_export-helper.js";import{K as P,i as j,j as D,k as U,N as $,h as B,m as p,o as h,p as z,q as a,s,c as v,a as f,E as b,t as u,O,M as S}from"./index.js";import{u as R}from"./user.store.js";var K=Object.defineProperty,W=Object.getOwnPropertyDescriptor,q=(t,e,o,d)=>{for(var n=d>1?void 0:d?W(e,o):e,w=t.length-1,i;w>=0;w--)(i=t[w])&&(n=(d?i(e,o,n):i(n))||n);return d&&n&&K(e,o,n),n};let k=class extends c{constructor(){super(...arguments);r(this,"userStore",R());r(this,"key","");r(this,"invite");r(this,"email","");r(this,"firstName","");r(this,"lastName","");r(this,"password","");r(this,"password2","");r(this,"error","")}mounted(){this.key=this.$route.params.key,this.userStore.findInviteByKey(this.key).then(o=>{this.invite=o}).catch(o=>{console.error(o)})}async register(){this.error=void 0;try{if(!this.email||!this.firstName||!this.lastName||!this.password||!this.password2){this.setErrorMessage("Gelieve alle velden in te vullen");return}if(this.password!==this.password2){this.setErrorMessage("Wachtwoorden komen niet overeen");return}this.userStore.register(this.key,this.email,this.password,this.firstName,this.lastName).then(o=>{console.log("User registered",o),this.$router.push("/login")}).catch(o=>{const d=o.message;switch(o.code){case"auth/weak-password":this.setErrorMessage("Het wachtwoord is te zwak en moet minstens 6 karakters lang zijn.");break;case"auth/email-already-in-use":this.setErrorMessage("Dit e-mail adres is reeds in gebruik. Klik op wachtwoord vergeten om een nieuw wachtwoord aan te vragen.");break;case"auth/invalid-email":this.setErrorMessage("Dit e-mail adres is niet geldig.");break;case"auth/operation-not-allowed":this.setErrorMessage("E-mail/wachtwoord accounts zijn tijdelijk onbeschikbaar.");break;default:this.setErrorMessage(d);break}})}catch(o){console.error(o)}}setErrorMessage(o){this.error=o}};k=q([I({components:{IonPage:P,IonContent:j,IonItem:D,IonLabel:U,IonInput:$,IonButton:B}})],k);const A=_(k),F={class:"message"},G={key:0,class:"error"},H={key:1};function L(t,e,o,d,n,w){const i=p("ion-label"),m=p("ion-input"),g=p("ion-item"),V=p("ion-button"),y=p("ion-content"),N=p("ion-page");return h(),z(N,null,{default:a(()=>[s(y,{class:"ion-padding"},{default:a(()=>[t.invite?(h(),v(S,{key:0},[f("div",F,[f("p",null,[f("b",null,b(t.invite.name),1),e[5]||(e[5]=u(" heeft je uitgenodigd om te registreren op de VDC website."))]),e[6]||(e[6]=f("p",{class:"info"},"Deze uitnodiging is alleen bestemt voor leden van de duikclub.",-1))]),t.error?(h(),v("span",G,b(t.error),1)):O("",!0),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[7]||(e[7]=[u("E-mail")])),_:1}),s(m,{modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=l=>t.email=l),type:"email"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[8]||(e[8]=[u("Voornaam")])),_:1}),s(m,{modelValue:t.firstName,"onUpdate:modelValue":e[1]||(e[1]=l=>t.firstName=l),type:"text"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[9]||(e[9]=[u("Achternaam")])),_:1}),s(m,{modelValue:t.lastName,"onUpdate:modelValue":e[2]||(e[2]=l=>t.lastName=l),type:"text"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[10]||(e[10]=[u("Wachtwoord")])),_:1}),s(m,{modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]=l=>t.password=l),type:"password"},null,8,["modelValue"])]),_:1}),s(g,null,{default:a(()=>[s(i,{position:"floating"},{default:a(()=>e[11]||(e[11]=[u("Wachtwoord (herhalen)")])),_:1}),s(m,{modelValue:t.password2,"onUpdate:modelValue":e[4]||(e[4]=l=>t.password2=l),type:"password"},null,8,["modelValue"])]),_:1}),s(V,{expand:"full",onClick:t.register},{default:a(()=>e[12]||(e[12]=[u("Registreren")])),_:1},8,["onClick"]),e[13]||(e[13]=f("a",{target:"_blank",href:"https://www.vubdivingcenter.be/privacy-policy/"},"Privacybeleid",-1))],64)):(h(),v("p",H,"Deze uitnodiging is niet geldig of reeds gebruikt."))]),_:1})]),_:1})}const Z=M(A,[["render",L],["__scopeId","data-v-73101548"]]);export{Z as default};
